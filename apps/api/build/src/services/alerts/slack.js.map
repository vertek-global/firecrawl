{"version":3,"file":"slack.js","sourceRoot":"","sources":["../../../../src/services/alerts/slack.ts"],"names":[],"mappings":";;;;;AAGA,4CAoBC;AAvBD,kDAA0B;AAC1B,oDAAiD;AAE1C,KAAK,UAAU,gBAAgB,CACpC,OAAe,EACf,gBAAyB,KAAK,EAC9B,aAAqB,OAAO,CAAC,GAAG,CAAC,iBAAiB,IAAI,EAAE;IAExD,MAAM,aAAa,GAAG,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;IACzD,MAAM,OAAO,GAAG;QACd,IAAI,EAAE,GAAG,aAAa,IAAI,OAAO,EAAE;KACpC,CAAC;IAEF,IAAI,CAAC;QACH,MAAM,QAAQ,GAAG,MAAM,eAAK,CAAC,IAAI,CAAC,UAAU,EAAE,OAAO,EAAE;YACrD,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;aACnC;SACF,CAAC,CAAC;QACH,eAAM,CAAC,IAAI,CAAC,4BAA4B,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC3D,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,eAAM,CAAC,KAAK,CAAC,0BAA0B,KAAK,EAAE,CAAC,CAAC;IAClD,CAAC;AACH,CAAC","sourcesContent":["import axios from \"axios\";\nimport { logger } from \"../../../src/lib/logger\";\n\nexport async function sendSlackWebhook(\n  message: string,\n  alertEveryone: boolean = false,\n  webhookUrl: string = process.env.SLACK_WEBHOOK_URL ?? \"\",\n) {\n  const messagePrefix = alertEveryone ? \"<!channel> \" : \"\";\n  const payload = {\n    text: `${messagePrefix} ${message}`,\n  };\n\n  try {\n    const response = await axios.post(webhookUrl, payload, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    logger.info(\"Webhook sent successfully:\", response.data);\n  } catch (error) {\n    logger.debug(`Error sending webhook: ${error}`);\n  }\n}\n"]}