{"version":3,"file":"issue_credits.js","sourceRoot":"","sources":["../../../../src/services/billing/issue_credits.ts"],"names":[],"mappings":";;AAGA,oCAiBC;AApBD,6CAA0C;AAC1C,0CAA+C;AAExC,KAAK,UAAU,YAAY,CAAC,OAAe,EAAE,OAAe;IACjE,mCAAmC;IACnC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,2BAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC;QAC9D,OAAO,EAAE,OAAO;QAChB,OAAO,EAAE,OAAO;QAChB,MAAM,EAAE,QAAQ;QAChB,2DAA2D;QAC3D,kBAAkB,EAAE,IAAI;QACxB,eAAe,EAAE,OAAO;KACzB,CAAC,CAAC;IAEH,IAAI,KAAK,EAAE,CAAC;QACV,eAAM,CAAC,KAAK,CAAC,wBAAwB,KAAK,EAAE,CAAC,CAAC;QAC9C,OAAO,KAAK,CAAC;IACf,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC","sourcesContent":["import { logger } from \"../../lib/logger\";\nimport { supabase_service } from \"../supabase\";\n\nexport async function issueCredits(team_id: string, credits: number) {\n  // Add an entry to supabase coupons\n  const { error } = await supabase_service.from(\"coupons\").insert({\n    team_id: team_id,\n    credits: credits,\n    status: \"active\",\n    // indicates that this coupon was issued from auto recharge\n    from_auto_recharge: true,\n    initial_credits: credits,\n  });\n\n  if (error) {\n    logger.error(`Error adding coupon: ${error}`);\n    return false;\n  }\n\n  return true;\n}\n"]}