{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/search/index.ts"],"names":[],"mappings":";;AAQA,wBAsFC;AA9FD,iDAA8C;AAE9C,iDAA8C;AAC9C,2CAA+C;AAC/C,qCAAyC;AACzC,uCAA2C;AAC3C,6CAAkD;AAE3C,KAAK,UAAU,MAAM,CAAC,EAC3B,KAAK,EACL,QAAQ,GAAG,KAAK,EAChB,WAAW,GAAG,CAAC,EACf,GAAG,GAAG,SAAS,EACf,MAAM,GAAG,SAAS,EAClB,IAAI,GAAG,IAAI,EACX,OAAO,GAAG,IAAI,EACd,QAAQ,GAAG,SAAS,EACpB,KAAK,GAAG,SAAS,EACjB,cAAc,GAAG,CAAC,EAClB,OAAO,GAAG,IAAI,GAaf;IACC,IAAI,CAAC;QACH,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,CAAC;YACrC,MAAM,OAAO,GAAG,MAAM,IAAA,+BAAkB,EAAC,KAAK,EAAE;gBAC9C,UAAU,EAAE,WAAW;gBACvB,GAAG;gBACH,MAAM;gBACN,IAAI;gBACJ,OAAO;gBACP,QAAQ;aACT,CAAC,CAAC;YACH,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC;gBAAE,OAAO,OAAO,CAAC;QACzC,CAAC;QACD,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,CAAC;YAC/B,MAAM,OAAO,GAAG,MAAM,IAAA,sBAAa,EAAC,KAAK,EAAE;gBACzC,WAAW;gBACX,GAAG;gBACH,MAAM;gBACN,IAAI;gBACJ,OAAO;gBACP,QAAQ;aACT,CAAC,CAAC;YACH,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC;gBAAE,OAAO,OAAO,CAAC;QACzC,CAAC;QACD,IAAI,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,CAAC;YAClC,MAAM,OAAO,GAAG,MAAM,IAAA,4BAAgB,EAAC,KAAK,EAAE;gBAC5C,WAAW;gBACX,GAAG;gBACH,MAAM;gBACN,IAAI;gBACJ,OAAO;gBACP,QAAQ;aACT,CAAC,CAAC;YACH,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC;gBAAE,OAAO,OAAO,CAAC;QACzC,CAAC;QACD,IAAI,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC;YACjC,MAAM,OAAO,GAAG,MAAM,IAAA,wBAAc,EAAC,KAAK,EAAE;gBAC1C,WAAW;gBACX,GAAG;gBACH,MAAM;gBACN,IAAI;gBACJ,OAAO;gBACP,QAAQ;aACT,CAAC,CAAC;YACH,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC;gBAAE,OAAO,OAAO,CAAC;QACzC,CAAC;QACD,OAAO,MAAM,IAAA,2BAAY,EACvB,KAAK,EACL,QAAQ,EACR,WAAW,EACX,GAAG,EACH,MAAM,EACN,IAAI,EACJ,OAAO,EACP,KAAK,EACL,cAAc,EACd,OAAO,CACR,CAAC;IACJ,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,eAAM,CAAC,KAAK,CAAC,0BAA0B,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;QACpD,OAAO,EAAE,CAAC;IACZ,CAAC;AACH,CAAC","sourcesContent":["import { logger } from \"../../src/lib/logger\";\nimport { SearchResult } from \"../../src/lib/entities\";\nimport { googleSearch } from \"./googlesearch\";\nimport { searchapi_search } from \"./searchapi\";\nimport { serper_search } from \"./serper\";\nimport { searxng_search } from \"./searxng\";\nimport { fire_engine_search } from \"./fireEngine\";\n\nexport async function search({\n  query,\n  advanced = false,\n  num_results = 5,\n  tbs = undefined,\n  filter = undefined,\n  lang = \"en\",\n  country = \"us\",\n  location = undefined,\n  proxy = undefined,\n  sleep_interval = 0,\n  timeout = 5000,\n}: {\n  query: string;\n  advanced?: boolean;\n  num_results?: number;\n  tbs?: string;\n  filter?: string;\n  lang?: string;\n  country?: string;\n  location?: string;\n  proxy?: string;\n  sleep_interval?: number;\n  timeout?: number;\n}): Promise<SearchResult[]> {\n  try {\n    if (process.env.FIRE_ENGINE_BETA_URL) {\n      const results = await fire_engine_search(query, {\n        numResults: num_results,\n        tbs,\n        filter,\n        lang,\n        country,\n        location,\n      });\n      if (results.length > 0) return results;\n    }\n    if (process.env.SERPER_API_KEY) {\n      const results = await serper_search(query, {\n        num_results,\n        tbs,\n        filter,\n        lang,\n        country,\n        location,\n      });\n      if (results.length > 0) return results;\n    }\n    if (process.env.SEARCHAPI_API_KEY) {\n      const results = await searchapi_search(query, {\n        num_results,\n        tbs,\n        filter,\n        lang,\n        country,\n        location,\n      });\n      if (results.length > 0) return results;\n    }\n    if (process.env.SEARXNG_ENDPOINT) {\n      const results = await searxng_search(query, {\n        num_results,\n        tbs,\n        filter,\n        lang,\n        country,\n        location,\n      });\n      if (results.length > 0) return results;\n    }\n    return await googleSearch(\n      query,\n      advanced,\n      num_results,\n      tbs,\n      filter,\n      lang,\n      country,\n      proxy,\n      sleep_interval,\n      timeout,\n    );\n  } catch (error) {\n    logger.error(`Error in search function`, { error });\n    return [];\n  }\n}\n"]}